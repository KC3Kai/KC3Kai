<div class="page_title">
	Data Backup &amp; Restore
	<div class="page_help_btn hover"><span>?</span> <span class="i18n">PageCommonHelpTopics</span></div>
</div>

<!-- HELP TOPICS -->
<div class="page_help">
	<div class="help_q">Why does my backup/import take forever, or throws an 'Out of Memory' error?</div>
	<div class="help_a">Unfortunately, the records in the internal database have become too large to be handled by the browser within limited memory space.<br/>
		Try the backup v2 method instead, if possible, when such issues are encountered on backup v1 method.<br/>
		Alternatively, there is <a href="https://github.com/KC3Kai/KC3Kai/issues/2164#issuecomment-322659010" target="_blank">another method</a>
		to backup your data by manually copying the profile data from profile folders to your own folders. Please click the link for further details.
	</div>
</div>

<div class="page_padding">

  <div class="dataSelect">
    <ul>
        <h3>Backup v1</h3>
        <li><a class="export_data fscolor3 hover">Export data to a file(.kc3data/.zip)</a></li>
        <li>Import data from a file(.kc3data/.zip)</li>
        <ul style="list-style-type:decimal">
            <li>
            Read the <a class = "warningbtn fscolor3 hover">WARNINGS</a> first!
            <div class="warning">
              <ul style="list-style-type:roman">
                <li><strong>DO NOT</strong> go to other tabs while importing your data.</li>
                <li><strong>DO NOT</strong> close the window while importing your data.</li>
                <li><strong>DO NOT</strong> input other files.</li>
                <li>Especially large files may take over an hour to finish.
                    BE PATIENT.</li>
              </ul>
            </div>
            <li>Select file:<input type="file" class="import_file" name="import_file"  accept=".kc3data,.zip" /></li>
            <li>
                <!--<a class="merge_data">Merge data</a> --> <a class="overwrite_data fscolor3 hover">Overwrite data</a>
            </li>
        </ul>

        <hr />
        <h3>Backup v2</h3>
        <p>
            On starting the v2 backup process, you will be asked to select the backup folder. Then, you will be
            asked for permission (once or twice) so that KC3 can view and write into the folder.
        </p>
        <li><a class="export_data2 fscolor3 hover">Create new backup</a></li>
        <li><a class="export_update_data2 fscolor3 hover">Update existing backup</a></li>
        <li><a class="warningbtn fscolor3 hover">Restore data from backup</a>
            <div class="warning">
                <ul>Please close all opened Kancolle or KC3 tabs, panels and pages before proceeding.<br />
                    This will overwrite all of your KC3 data! Are you sure?
                    <li><a class="import_data2 fscolor3 hover">Proceed</a></li>
                </ul>
            </div>
        </li>
        <p><div>
            Read following notes and the <a class = "warningbtn fscolor3 hover">WARNINGS</a> first!
            <div class="warning">
                <ul style="list-style-type:roman">
                <li><strong>DO NOT</strong> go to other tabs while importing your data.</li>
                <li><strong>DO NOT</strong> close the window while importing your data.</li>
                <li><strong>DO NOT</strong> modify any file in the folder.</li>
                <li>Especially large files may take over an hour to finish.
                    BE PATIENT.</li>
                </ul>
            </div>
        </div></p>
        <p>
            This is an experimental backup feature that provides more stability at the cost of speed.<br />
            It also allows for updating existing backup files without having to perform a full backup.<br />
            Please note that it is only supported by Chrome 86 and later.<br />
            The v2 backup files are NOT compatible with v1 backup, and vice versa.
        </p>
    </ul>
  </div>

  <div class="processDisplay">
      <table>
          <tr>
              <td class="indicatorColumn">
                  <div class="expedAkatsuki">
                      <div>Please be patient.<br />This process may take a long time.</div>
                      <div><strong>DO NOT TOUCH ANYTHING<br />
                          BEFORE THE "Finished!" MESSAGE!!!</strong>
                      </div>
                      <img src="/assets/img/ui/loadingakatsuki.gif" />
                  </div>
                  <div class="expedFinished">
                      <div>Akatsuki has returned from data expedition with results: <span class="errorMessage"></span></div>
                      <img class="finished" src="/assets/img/ui/loadedakatsuki.jpg" />
                      <hr />
                      <li><a class="gobackbtn fscolor3 hover">Acknowledge</a></li>
                  </div>
              </td>
              <td class="progressColumn"><div class="processText" >
              </div></td>
          </tr>
      </table>
  </div>

</div>
